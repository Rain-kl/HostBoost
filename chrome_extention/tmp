version: "3.8"
services:
  runner:
    image: gitea/act_runner:latest
    container_name: gitea-runner
    restart: always
    privileged: true
    environment:
      CONFIG_FILE: /config.yaml
      GITEA_INSTANCE_URL: https://git.torfel.com
      GITEA_RUNNER_REGISTRATION_TOKEN: "NGxqLXrCbXEH1flXSxAGka0YevyLzzXlgM83yuTJ"
      GITEA_RUNNER_NAME: "${HOSTNAME}"
      GITEA_RUNNER_LABELS: "ubuntu-latest"
      DOCKER_HOST: unix:///var/run/docker.sock           # 这是docker的套接字，用于Docker in Docker
    volumes:
      - ./config.yaml:/config.yaml
      - /data/act_runner:/data
      - /var/run/docker.sock:/var/run/docker.sock

